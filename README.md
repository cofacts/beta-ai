# Cofacts internal ADK agents

## Initial Setup

1.  **Set up Environment Variables:**
    The project root contains a `.env.sample` file. Copy this file to `.env` within the same directory and fill in the required values (like API keys or tokens).
    ```bash
    cp .env.sample .env
    # Then edit .env
    ```

2.  **Ensure `uv` is installed:**
    Follow the installation instructions at [https://docs.astral.sh/uv/install/](https://docs.astral.sh/uv/install/).

3.  **(Optional) Create the Virtual Environment:**
    While `uv run` can create the environment automatically, you can create it explicitly if preferred:
    ```bash
    uv venv
    ```
    You generally **do not** need to manually activate the environment or run `uv sync` if you use `uv run` for executing commands.

## Running the Agents

Use `uv run` to execute the `main.py`. `uv` will automatically ensure the project environment (`.venv`) exists and is synced with the `uv.lock` file before running the command.

```bash
uv run --env-file .env main.py
```
The web interface will be available at `localhost:8080`.

## Running with Docker Compose

1. Copy the sample environment file and edit it as needed:
   ```bash
   cp .env.sample .env
   # Edit .env to fill in required values
   ```

2. Build and start the service:
   ```bash
   docker compose up --build
   ```
   The web interface will be available at http://localhost:8000

3. To stop the service:
   ```bash
   docker compose down
   ```

## Adding New Dependencies (for Developers)

This project uses `pyproject.toml` to define direct dependencies and `uv.lock` as the lockfile generated by `uv` for reproducible installs.

To add a new dependency:

1.  **Add the package using `uv add`:**
    This command automatically updates both `pyproject.toml` and `uv.lock`.
    ```bash
    # Example: Add the 'requests' library
    uv add requests

    # Example: Add a package with a version constraint
    uv add "requests>=2.25"
    ```

2.  **Commit the changes:**
    Commit **both** the updated `pyproject.toml` and `uv.lock` files to version control. This ensures that other developers and deployment environments use the exact same set of dependencies. Other developers will automatically get the new dependency the next time they use `uv run` or if they explicitly run `uv sync`.

## Deploy

```bash
docker build -t cofacts/beta-ai .
docker push cofacts/beta-ai
```

And go to server to pull & run the image.
